<link href="{{url_for('static', filename='bootstrap.min.css')}}" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" rel="stylesheet">
<link href="{{url_for('static', filename='styles.css')}}" rel="stylesheet">

<style>
    .speech-data-columns{
        height: 100%;
        background: white;
    }
    input[type="file"] {
        display: none;
    }
    .custom-file-upload {
        background-color: #5fa9e8;
        display: flex;
        align-items: center;
        cursor: pointer;
        border-radius: 10px;
        height: 50%;
    }
    .upload-button-text {
        text-align: center;
    }
    .record-button{
        height:90px; 
        width:90px; 
        border-radius:50%; 
        background-color:red;
        border:0px;
        outline: none;
        box-shadow: 0 0 0 red;
        animation: none;
    }
    @keyframes pulse {
    0% {
        box-shadow: 0 0 0 0 red;
    }
    70% {
        box-shadow: 0 0 0 10px rgba(204,169,44, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(204,169,44, 0);
    }
}

    
</style>

<div class="container-fluid">

    <div class="row" style="height:15%; background:white; margin:0.5%; display:flex; align-items: center;">
        <div class="col-md-8 col-xs-6">
            <h1><b>SpeakYourDreams</b></h1>
        </div>
        <div class="col-md-1 col-xs-2">
            <label for="file-upload" class="custom-file-upload">
                <h4 class="upload-button-text">Upload Transcript</h4>
            </label>
            <input id="file-upload" type="file"/>  
        </div>
        <div class="col-md-1 col-xs-2">
            <label for="file-upload" class="custom-file-upload">
                <h4 class="upload-button-text">Upload Audio</h4>
            </label>
            <input id="file-upload" type="file"/>        
        </div>
        <div class="col-md-2 col-xs-2" style="text-align: center;">
            <button class="record-button" id="record_button">
                <i class="fa fa-microphone" style="font-size:48px; color:white;"></i>
            </button>
        </div>
    </div>

    <div class="row" style="height: 70%;">
        <div class="col-md-2 col-xs-12 speech-data-columns" style="margin:1%; border-radius:25px;">
            <div class="panel panel-teal panel-widget">
                <div class="row no-padding"><em class="fa fa-xl fa-shopping-cart color-blue"></em>
                    <div class="large">120</div>
                    <div class="text-muted">New Orders</div>
                </div>
            </div>
            <div class="panel panel-blue panel-widget">
                <div class="row no-padding"><em class="fa fa-xl fa-comments color-orange"></em>
                    <div class="large">52</div>
                    <div class="text-muted">Comments</div>
                </div>
            </div>
            <div class="panel panel-orange panel-widget">
                <div class="row no-padding"><em class="fa fa-xl fa-users color-teal"></em>
                    <div class="large">24</div>
                    <div class="text-muted">New Users</div>
                </div>
            </div>
            <div class="panel panel-red panel-widget ">
                <div class="row no-padding"><em class="fa fa-xl fa-search color-red"></em>
                    <div class="large">25.2k</div>
                    <div class="text-muted">Page Views</div>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-xs-12 speech-data-columns" style="margin: 1%;">
            <div class="row" id="main_text" style="height:87.5%; background:lightgray;">
                This is where users will write
            </div>
            <div class="row" style="text-align:center;">
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
                </div>
                <div>
                    <button style="width:50px; height:50px; border-radius:50%; background-color:#ffffff; border:none" id="play_pause">
                        <i class="fa fa-pause" style="font-size:30px; color:black;" aria-hidden="false"></i>
                        <i class="fa fa-play" style="font-size:30px; color:black; display: none;" aria-hidden="false"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="margin-top: 1%;">
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id=pauses>
                    <h4>Pauses</h4>
                    <div class="easypiechart" id="easypiechart-blue" data-percent="92" ><span class="percent">92%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="emotion">
                    <h4>Emotion</h4>
                    <div class="easypiechart" id="easypiechart-orange" data-percent="65" ><span class="percent">65%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="category">
                    <h4>Category</h4>
                    <div class="easypiechart" id="easypiechart-teal" data-percent="56" ><span class="percent">56%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="wpm">
                    <h4>WPM</h4>
                    <div class="easypiechart" id="easypiechart-red" data-percent="27" ><span class="percent">27%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="pronunciation"> 
                    <h4>Pronunciation</h4>
                    <div class="easypiechart" id="easypiechart-teal" data-percent="27" ><span class="percent">27%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="accuracy">
                    <h4>Accuracy</h4>
                    <div class="easypiechart" id="easypiechart-red" data-percent="82" ><span class="percent">82%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="fillers">
                    <h4>Fillers</h4>
                    <div class="easypiechart" id="easypiechart-red" data-percent="43" ><span class="percent">43%</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="panel panel-default">
                <div class="panel-body easypiechart-panel" id="finalGrade">
                    <h4>Final Grade</h4>
                    <div class="easypiechart" id="easypiechart-red" data-percent="75" ><span class="percent">75%</span></div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    var record_button = document.getElementById("record_button")
    var main_text = document.getElementById("main_text") // where the speech will be transcribed
    var play_pause = document.getElementById("play_pause");

    var pauses = document.getElementById("pauses")
    var emotion = document.getElementById("emotion")
    var category = document.getElementById("category")
    var wpm = document.getElementById("wpm")
    var pronunciation = document.getElementById("pronunciation")
    var accuracy = document.getElementById("accuracy")
    var fillers = document.getElementById("fillers")
    var finalGrade = document.getElementById("finalGrade")

    var recording = false;
    record_button.addEventListener("click", function(){
        if(recording){
            record_button.style.animation="none";
            recording=false
        }
        else{
            record_button.style.animation="pulse 2s infinite"
            recording=true
        }
    })

    var play = true;
    play_pause.addEventListener("click", function(){
        if(play){
            play_pause.innerHTML="<i class='fa fa-play' style='font-size:30px; color:black; display: block' aria-hidden='false'></i>"
            play=false;
        }
        else{
            play_pause.innerHTML="<i class='fa fa-pause' style='font-size:30px; color:black; display: block' aria-hidden='false'></i>"
            play=true;
        }
    })


</script>

<script src="{{url_for('static', filename='jquery-1.11.1.min.js')}}"></script>
<script src="{{url_for('static', filename='chart.min.js')}}"></script>
<script src="{{url_for('static', filename='chart-data.js')}}"></script>
<script src="{{url_for('static', filename='easypiechart.js')}}"></script>
<script src="{{url_for('static', filename='easypiechart-data.js')}}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
